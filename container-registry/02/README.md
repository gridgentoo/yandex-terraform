# Создание и обновление ВМ на базе Container Optimized Image

### Подготовка окружения
* Создайте для себя новый каталог.
* Создайте в этом каталоге сервисный аккаунт с именем sa-<FOLDER-NAME> и ролью container-registry.images.puller.

### Создание ВМ на базе Container Optimized Image
Создайте ВМ, на которой будет запущен Docker-контейнер с приложением:

1. В консоли управления выберите созданный каталог.

1. В списке сервисов выберите **Compute Cloud**.

1. Нажмите кнопку **Создать ВМ**.

1. В блоке **Базовые параметры**:

    * Введите имя ВМ: demo-vm

    * Выберите сервисный аккаунт: sa-<FOLDER-NAME>

1. В блоке **Публичные образы** выберите Container Optimized Image.

1. В блоке **Диски** выбирите *тип диска* SSD.

1. В блоке **Вычислительные ресурсы** выберите *гарантированную долю vCPU* 100%.

1. В блоке **Сетевые настройки** выберите автоматическое назначение публичного адреса.

1. В блоке **Доступ**:

    * Введите логин: yc-user

    * Введите SSH-ключ, взятый из файла ~/.ssh/id_rsa.pub

1. В блоке **Настройка Docker-контейнера**:

    * Введите имя Docker-контейнера: demo-container

    * Введите имя используемого Docker-образа: cr.yandex/yc/demo/coi:v1

1. Нажмите кнопку **Создать ВМ**

### Использование созданной ВМ

1. Дождитесь, пока ВМ перейдет в состояние RUNNING. Скачивание и запуск Docker-контейнера может занять некоторое время после запуска ВМ.

1. На странице ВМ найдите публичный IPv4

1. Введите адрес ВМ в адресной строке, загрузится страница с текстом "Hello v1"

### Обновление Docker-контейнера

1. Нажмите кнопку **Изменить ВМ**

1. Измените Docker-образ на "cr.yandex/yc/demo/coi:v2"

1. Нажмите кнопку **Сохранить изменения**. Обратите внимание, что для изменения Docker-контейнера не понадобилась перезагрузка ВМ.

1. Обновите страницу с адресом ВМ. Текст на странице изменится на "Hello v2"

### Удаление ВМ

Нажмите кнопку **Удалить** на странице ВМ.

### Смотрите также 

[Создание группы виртуальных машин на базе Container Optimized Image](../../instance-groups/02)
